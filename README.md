# STG2019Unity

## 目次

1. [プロジェクトについて](#プロジェクトについて)
2. [環境](#環境)
3. [実行方法](#実行方法)
4. [ゲーム内容](#ゲーム内容)
5. [操作方法](#操作方法)
6. [工夫した点](#工夫した点)


## プロジェクトについて
Unityについての勉強のため去年の夏ごろから半年ぐらいかけて、学生の頃に個人製作したシューティングゲームの基本機能を移植したものです。
ステージやスコアなど未移植の部分もありますが、ベースとなる画面遷移やプレイヤー・敵の動作は作成してあります。

自分のC#のプログラミングスキルと、自分で調べて開発するスキルをアピールさせていただきたいです。
ゲームの中身については今回のアピールポイントではないので、細かくは触れません。

## 環境
| 言語・フレームワーク  | バージョン |
| --------------------- | ---------- |
| VisualStudio2022      | 17.13.5    |
| Unity                 | 2022.3.31f1|

## 実行方法
「実行用ファイル20250406」をフォルダごとローカルにダウンロードし、STG2019Unity.exeを起動してください。

## ゲーム内容
ボスの攻撃を避けつつ、ボスのHPを0にすればクリアです。
キャラクター毎にショットやボムの性能が違います。
敵の弾を消すか近づくと弾に応じたゲージが溜まり、満タンになると一定時間ショットが強くなります。

難易度選択の画面はありますが、分岐を未実装なのでボスの動作は特に変わりません。
ステージ選択画面は4~9は未実装なので使えません。

## 操作方法
| キー    | 動作 |
| -------| ----- |
| 矢印キー| 上下左右に移動  |
| Zキー      | 決定/ショットを撃つ  |
| Xキー      | キャンセル/ボムを撃つ|
| Shiftキー  | 押している間低速移動する|
| Escapeキー | ポーズ画面を起動する|

## 工夫した点
### 画面遷移
実装：STG2019Unity\Assets\Script\Menu 下のファイル<br>
メニュー画面は複数個所で使われるので、処理を共通化しています。
キャンセルした場合のメニューの位置も覚えておくことにより、操作しやすくしています。
上手く動かない部分は連打防止やwaitを入れるなど、工夫して正常な画面遷移が行われるように実装しました。

### オブジェクトプールの使用
実装：STG2019Unity\Assets\Script\Common\BulletPoolBase.cs<br>
　　　STG2019Unity\Assets\Script\Player\PlayerBullet 下のファイル<br>
　　　STG2019Unity\Assets\Script\Enemy\EnemyBullet 下のファイル<br>
　　　STG2019Unity\Assets\Script\Effect 下のファイル<br>
Unityの仕様として、弾生成などで一度にオブジェクトを何度も生成してしまうと処理が重くなってしまうという仕様があります。
そこで、オブジェクトプールという概念を調べて実装しています。
処理内容を簡単に説明すると、オブジェクトを消す時に破棄せず非アクティブ状態で保持しておき、次の生成時に非アクティブのオブジェクトがあればそのオブジェクトを使用します。

### データ読み込みの高速化
実装：STG2019Unity\Assets\Script\Common\SettingDataLoader.cs<br>
プレイヤーや敵の攻撃力などの情報を読み込む処理を非同期処理を用いて実装しています。
これにより、起動直後からゲーム画面に移行するまでの間に裏で読み込むため、待ち時間が少なくなる見込みです。
現状データが少ないのでほぼ効果は感じられていないですが、データが増えたら効果が出るはずです。

### その他
プレハブ作成、物理演算、光源操作、アニメーション処理などUnity独自の仕様を自分で調べて実装しました。
